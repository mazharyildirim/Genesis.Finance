@page "/UserManagement/UserList"
@using Genesis.Shared.DTO;

@inject StateService stateService;
@inject UserService userService;
@inject NavigationManager navigationManager
<h3>UserList</h3>

@if (list!=null){

    <GenesisList Data="@list"  ColumnList="@columnList"></GenesisList>
}
else
{
    <div>Yükleniyor...</div>
}

@code {
    List<UserListModel> list = null;
    List<Genesis.Shared.ComponentModel.ListItem> columnList = null;
    protected override async Task OnInitializedAsync()
    {
        if (stateService.IsSignedIn)
        {

            var userListResponse = await userService.GetUsers(stateService.UserResponse.Access_Token);
            if (userListResponse.HasSuccessStatusCode)
            {
                list = userListResponse.Value.List;
                columnList = new List<Genesis.Shared.ComponentModel.ListItem>();
                columnList.Add(new Genesis.Shared.ComponentModel.ListItem() { ColummName = "firstname",DisplayName ="Ad" });
                columnList.Add(new Genesis.Shared.ComponentModel.ListItem() { ColummName = "lastname",DisplayName ="Soyad" });
                columnList.Add(new Genesis.Shared.ComponentModel.ListItem() { ColummName = "username",DisplayName ="Kullanıcı Adı" });
            }

        }
        else
        {
            navigationManager.NavigateTo("/Login/Login/SignIn");
        }
    }
}
